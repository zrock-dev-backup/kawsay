@startuml
title Kawsay Domain Model - Entity-Relationship Diagram

' --- Entities ---
entity TimetableEntity {
  * **Id** (PK)
  --
  * Name
  * StartDate
  * EndDate
}

entity CourseEntity {
  * **Id** (PK)
  --
  * Name
  * Code
}

entity TeacherEntity {
  * **Id** (PK)
  --
  * Name
  * Type
}

entity StudentEntity {
  * **Id** (PK)
  --
  * Name
  * Standing
  --
  * SectionId (FK)
}

entity HolidayEntity {
  * **Id** (PK)
  --
  * Name
  * Date
  --
  * TimetableId (FK)
}

entity CohortEntity {
  * **Id** (PK)
  --
  * Name
  --
  * TimetableId (FK)
}

entity StudentGroupEntity {
  * **Id** (PK)
  --
  * Name
  --
  * CohortId (FK)
}

entity SectionEntity {
  * **Id** (PK)
  --
  * Name
  --
  * StudentGroupId (FK)
}

entity ClassEntity {
  * **Id** (PK)
  --
  * ClassType
  * Frequency
  * Length
  * StartDate (new)
  * EndDate (new)
  --
  * CourseId (FK)
  * TeacherId (FK)
  * TimetableId (FK)
  * StudentGroupId (FK, nullable)
  * SectionId (FK, nullable)
}

' --- Configuration & Junction Entities ---
entity EnrollmentEntity {
  * **Id** (PK)
  --
  * EnrollmentDate
  --
  * StudentId (FK)
  * ClassId (FK)
}

entity CoursePrerequisiteEntity {
  * **CourseId** (FK)
  * **PrerequisiteCourseId** (FK)
}

entity CourseConfigurationEntity {
  * **Id** (PK)
  --
  * ClassType
  * DefaultLength
  * DefaultFrequency
  --
  * CourseId (FK)
}

entity TeacherQualificationEntity {
  * **TeacherId** (FK)
  * **CourseId** (FK)
}

' --- Relationships ---
TimetableEntity "1" -- "0..*" CohortEntity : has
TimetableEntity "1" -- "0..*" HolidayEntity : has

CohortEntity "1" -- "1..*" StudentGroupEntity : contains
StudentGroupEntity "1" -- "1..*" SectionEntity : contains
SectionEntity "1" -- "0..*" StudentEntity : contains

TimetableEntity "1" -- "0..*" ClassEntity : schedules
CourseEntity "1" -- "0..*" ClassEntity : is for
TeacherEntity "1" -- "0..*" ClassEntity : is taught by

' Masterclass / Lab Relationships
StudentGroupEntity "1" -- "0..*" ClassEntity : is for (Masterclasses)
SectionEntity "1" -- "0..*" ClassEntity : is for (Labs)

' Enrollment (Many-to-Many)
StudentEntity "1" -- "0..*" EnrollmentEntity : has
ClassEntity "1" -- "0..*" EnrollmentEntity : has

' Prerequisite (Self-referencing Many-to-Many)
CourseEntity "1" -- "0..*" CoursePrerequisiteEntity : requires
CourseEntity "1" -- "0..*" CoursePrerequisiteEntity : is prerequisite for

' Configuration & Qualification (Many-to-Many)
CourseEntity "1" -- "1..2" CourseConfigurationEntity : has configuration for
CourseEntity "1" -- "0..*" TeacherQualificationEntity : can be taught by
TeacherEntity "1" -- "0..*" TeacherQualificationEntity : is qualified for
@enduml
