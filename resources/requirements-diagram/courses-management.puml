@startuml
skinparam wrapwidth 200
skinparam defaultFontName Helvetica

skinparam class {
    BackgroundColor<<Requirement>> Beige
    BackgroundColor<<ActiveDevelopment>> Yellow
}

package "Timetable" {
    stereotype "Class-Teacher Timetabling" AS gen_2 {
        {field} overview: I as Registrar want the system to generate a class timetable for the students of a module.
    }
	NOTE LEFT OF gen_2
		Distribute group and sections so that no teacher and no class should have no simultaneous lessons.
	END NOTE
    stereotype "Faculty timetabling" AS generation_facultyTimetabling  {
        {field} overview: As a Registrar I want the system to generate a timetable where teachers have been assigned to a class taking into account their availability and our preference of time.
    }
	NOTE LEFT OF generation_facultyTimetabling
		Distribute courses between instructors under specified conditions.
	END NOTE
    stereotype "Automated timetable generation" AS module_population{
        {field} overview: As a Registrar I want the system to generate an academic timetable of the module
    }
	module_population +-- generation_facultyTimetabling
	module_population +-- gen_2
    stereotype "Week view" AS timetable_weekView {
        {field} overview: As a registrar want to see the timetable in week segments being able to appreciate date.
    }
    stereotype "Date range picker" AS timetable_datePicker{
        {field} overview: As a registrar want to choose a data range for the duration of the timetable so that I can see the timetable by week.
    }
	timetable_datePicker +-- timetable_weekView
    stereotype "Timetable management" AS timetable_mgmt {
        {field} overview: I as a registrar want to create a module timetable.

        {field} data: {name, date, [{course}]}
    }
	timetable_mgmt <.. module_population: <<drvReqt>>
	timetable_mgmt +-- timetable_datePicker
}

package "Course" {
    stereotype "Academic map graphical view" AS course_dependencyGraphView {
        {field} overview: I as a registrar want the system to show me a graphical view of the academic map dependencies, so that I can asses if courses depedencies are correct.
    }
    stereotype "Course dependency" AS course_dependency {
        {field} overview: I as a registrar want to register that a course depends in other courses.
    }
	course_dependency <.. course_dependencyGraphView: <<drvReqt>>
    stereotype "Course assignation" AS course_assignation {
        {field} overview: As a registrar want to set in which term a course is available.
    }
    stereotype "Course" AS course {
        {field} overview: I as a registrar want to create/update/delete courses of the Commercial Software Engineering career.
    }
	course <.. course_dependency: <<drvReqt>>
	course +-- course_assignation
}

package "Enrollment Analysis" AS pk_enrollmentAnalysis {
    stereotype "Enrollment Hint" AS hint_clash_enrollment {
        {field} overview: If the system identifies an enrollment clash it should hint the user another timeslot, that is a the same class subject but in another timesslot.
    }
    stereotype "Enrollment clash alert" AS notification_clashStudentEnrollment {
        {field} overview: As a registrar I want to receive an alert when attempting to enroll an already booked student.
    }
    stereotype "Student timeslot availability evaluation" AS clash_studentEnrollment {
        {field} overview: Before enrolling student to class, system should verify if the student isn't already enrolled in another class at the same timeslot.
    }
	clash_studentEnrollment <.. notification_clashStudentEnrollment: <<drvReqt>>
	clash_studentEnrollment <.. hint_clash_enrollment: <<drvReqt>>
    stereotype "Course pass/fail forecasting hint" AS eligibility_forecasting {
        {field} overview: When opening next module, grading notes are not in yet, in this situation registrar office ponders if the student should be enrolled. System should do the forecasting based on GPA and SPA.
    }
    stereotype "Course dependency evaluation" AS eligibility_courseDepedency {
        {field} overview: I as a registrar want the sytem to notify me if a student doesn't have the necessary courses required to take the course.
    }
	eligibility_courseDepedency <.. eligibility_forecasting
    stereotype "Student eligibility status" AS student_eligibilityStatus {
        {field} overview: I as registrar want to have a view of a student eligibility, showing timeslot availability and pre-requisite course.
    }
	student_eligibilityStatus +-- eligibility_courseDepedency
	student_eligibilityStatus +-- clash_studentEnrollment
}


package "Enrollment" AS pkg_enrollment {
    stereotype "Student selection" AS student_selection {
        {field} overview: I as registrar want to select a student from a list, so that him/her would be enrolled to it.
    }
    stereotype "Collect list of failed students" {
        {field} overview:
    }
    stereotype "Automatically advance students to next course" {
        {field} overview:
    }
    stereotype "Enrollment compliance" AS enrollment_compliance {
        {field} overview: Ensure student is enrolled in 3 courses, taking into account ESP
    }
    stereotype "Force enrollment" AS enrollment_forced {
        {field} overview: I as registrar want to forcibly enroll a student so that he/she can be enrolled because of a management decision.
		{field} A forced enrollment should have a justification.
		{field} Registrar should be able to select a pre-made justification.
    }
    stereotype "Notifications" AS notifications {
        {field} overview: I as registrar want to receive notifications when attempting to enroll a student and: student isn't available for timeslot, student doesn't have pre-requisite courses.
    }
    stereotype "Enrollment" AS enrollment {
        {field} overview: I as registrar want to enroll students in a class.
    }
	enrollment +-- enrollment_forced
	enrollment +-- notifications
}

package "Class" {
    stereotype "Class periods" AS class_periods {
		{field} id: 22
        {field} overview: I as registrar want to define which at which periods would preferable to have the class.
    }
	generation_facultyTimetabling <.. class_periods: <<drvReqt>>
    stereotype "Creation hint" AS hint_custom_class{
        {field} overview: I as a registrar want system to list only available teachers based on class preferred timeslots.
    }
    stereotype "Custom class creation" AS custom_class {
        {field} overview: I as a registrar want to create a custom class so that it is possible to accomodate failed students.
    }
	custom_class <.. hint_custom_class: <<drvReqt>>
	NOTE LEFT OF custom_class
		Scenario example:
			student fails a class and has to take it again.
		In this case Registrar will create a custom class.
	END NOTE
    stereotype "Teacher selection" AS class_teacherSelection {
		{field} id: 20
        {field} overview: I as registrar want to select a teacher to teach a class, so that I can assign him/her.
		{field} The selection list should only contain the names of teachers that can give the class.
    }
    stereotype "Course selection" AS class_courseSelection {
		{field} id: 21
        {field} overview: I as a registrar want to select a course to be imparted in the class.
    }
    stereotype "Class creation" AS class_creation {
        {field} overview: I as registrar want to create a new course either masterclass or faculty practitioner.
		{field} There are two kinds of classes:
        {field} Masterclass, given by a professor. A whole group of students attends the masterclass.
        {field} Practicioner class, given by an industry engineer. A section of students attends this class.
		{field} attributes: class name, teacher, students, timeslot, frequency.
    }
    class_creation +-- class_courseSelection
    class_creation +-- class_periods
    class_creation +-- class_teacherSelection
    class_creation <.. custom_class: <<drvReqt>>

    stereotype "Class timeslot migration" AS class_timeslotMigration {
        {field} overview: I as registrar want to change the timeslot of a class so that I can handle the teacher's request.
    }
    stereotype "Class" AS class_mgmt{
        {field} overview: I as registrar want to create/update/delete classes (masterclass and faculty practitioner class) of a course.
    }
    class_mgmt +-- class_creation
	class_mgmt +-- class_timeslotMigration
}

package "Module report" AS module {
    stereotype "Auto student advance" AS module_autoAdvance {
        {field} overview: I as registrar want to automatically advance students
    }
    stereotype "Student list" AS module_studentView {
        {field} overview: I as registrar want a list of students in two groups, passed and failed.
    }
    stereotype "End module button" AS module_end {
        {field} overview: Press button to mark module as ended. This is the first step of new module process.
    }
    stereotype "Module student management" AS module_mgmt {
        {field} overview: I as Registrar want a view to manage the students.
    }
}

@enduml
    stereotype "" AS {
		{field} id:
        {field} overview:
    }
